#:import MDRaisedButton kivymd.uix.button.MDRaisedButton

WindowManager:
    FirstWindow:
    SecondWindow:
    MapWindow:
    CallboardWindow:

<FirstWindow>:
    name: "first"

    MDBoxLayout:
        orientation: "vertical"
        spacing: 5
        padding: 10

        Image:
            source: "logo.png"

        # Добавляем две новые кнопки
        MDRaisedButton:
            text: "Войти как пользователь"
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            on_release: root.user_button_pressed()

        MDRaisedButton:
            text: "Войти как водитель"
            pos_hint: {'center_x': 0.5}
            on_release: 
                app.root.current = "second"
                root.manager.transition.direction = "left"

<SecondWindow>:
    name: "second"

    MDBoxLayout:
        orientation: "vertical"
        spacing: 5
        padding: 10

        Image:
            source: "logo.png"

        MDTextField:
            id: username_field
            hint_text: "Логин"
            pos_hint: {'center_x': 0.5}
            size_hint_x: None
            width: 200

        MDTextField:
            id: password_field
            hint_text: "Пароль"
            pos_hint: {'center_x': 0.5}
            size_hint_x: None
            width: 200
            password: True  # Скрытие пароля

        MDRaisedButton:
            text: "Войти"
            pos_hint: {'center_x': 0.5}
            on_release: root.login_button_pressed()
            
<MapWindow>:
    name: "map"

    MDBoxLayout:
        orientation: 'vertical'
        theme_style: "Dark"

        MDTopAppBar:
            title: "Карта"
            left_action_items: [["menu", root.open_menu]]
            elevation: 10

        MapView:
            id: map_view
            zoom: 12
            lat: 50.0965
            lon: 45.4165

        MDBoxLayout:
            size_hint_y: None
            height: dp(48)
            padding: dp(8)
            spacing: dp(10)

            MDFlatButton:
                text: "Карта"
                md_bg_color: app.theme_cls.primary_color
                size_hint_x: 1

            MDFlatButton:
                text: "Доска объявлений"
                md_bg_color: app.theme_cls.primary_color
                size_hint_x: 1
                on_release: 
                    app.root.current = "CallboardWindow"
                    root.manager.transition.direction = "up"

<CallboardWindow>:
    name: "CallboardWindow"

    MDBoxLayout:
        orientation: 'vertical'
        theme_style: "Dark" 

        Label:
			text: "CallboardWindow"
			font_size: 32

        MDRaisedButton:
            text: "Вернутся на карту"
            pos_hint: {'center_x': 0.5}
            on_release: 
                app.root.current = "map"
                root.manager.transition.direction = "down"
